{"version":3,"sources":["app.js","functions.js","d3-controller.js","exerciseController.js","mainController.js","overviewController.js","exercise.js","overview.js","pick-wheeld3.js","data-service.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["var app = angular.module('physioApp', ['ngTouch', 'ngRoute', 'hmTouchEvents', 'ngAnimate', 'timer']);\n\napp.config(['$routeProvider', function($routeProvider) {\n    $routeProvider\n        .when('/', {\n            templateUrl: 'views/start.html'\n        })\n        .when('/exercise/:id', {\n            templateUrl: 'views/exercise.html'\n        })\n        .when('/timer', {\n            templateUrl: 'views/timer.html'\n        })\n        .when('/wheel', {\n            templateUrl: 'views/wheel.html'\n        });\n}]);","(function ($) { // iief = Immediately-Invoked Function Expression, mainly useful to limit scope\n    $(function() { // Shorthand for $( document ).ready()\n\n\n\n    });\n}(jQuery));","app.controller('d3Controller', ['$scope', function($scope) {\n    $scope.scrollY = -15;\n    $scope.minutesScrollY = -15;\n    $scope.secScrollY = -15;\n    var currentScrollPos = 0;\n    var currentScrollPos2 = 0;\n    var amount;\n\n\n    $scope.getOptions = function(_amount){\n        return new Array(_amount);\n        amount = _amount;\n    }\n\n    $scope.getMinSec = function(){\n        return new Array(60);\n    }\n\n    $scope.getIndices = function (_index) {\n        if (_index+1 <= 10){\n            var _indexstring = '0' + _index;\n            return _indexstring;\n        } else {\n            return _index;\n        }\n    }\n\n    $scope.panInput = function (event) {\n        // remove span panend class in case it was added before\n        $('.span--panend').removeClass('span--panend');\n\n        $scope.scrollY = event.deltaY + currentScrollPos;\n        checkPos();\n    }\n\n    $scope.panTime = function (event, time) {\n        console.log(time + \"time\");\n        // remove span panend class in case it was added before\n        $('.span--panend').removeClass('span--panend');\n\n        $scope.minutesScrollY = event.deltaY + currentScrollPos;\n        checkPos();\n    }\n\n    $scope.stopPan = function (event) {\n        // save scroll Position to current\n        currentScrollPos = $scope.scrollY;\n        console.log(\"currentScrollPos: \" + currentScrollPos);\n        // check if end at top or bottom reached\n        var elemHeight = $('.input__inactive').first().height();\n        if(currentScrollPos > 140) {\n            currentScrollPos = 3*elemHeight;\n        } else if(currentScrollPos < -(amount*elemHeight - 4*elemHeight)){\n            currentScrollPos = -(amount*elemHeight - 4*elemHeight);\n        }\n        console.log(\"amount*elemHeight + 2*elemHeight: \", -amount*elemHeight);\n\n        var nearestPoint = roundTo(currentScrollPos, 40);\n        var deltaToStop = nearestPoint - currentScrollPos;\n        console.log(\"nearestPoint\", nearestPoint, \"point at stop\", currentScrollPos, \"delta\", deltaToStop);\n\n\n        // increase css transition duration to animate\n        $('.input__scroll-container').addClass(\"scroll-container--anim\");\n        $scope.scrollY = nearestPoint;\n\n        // check for transition ending\n        $('.scroll-container--anim').on('transitionend webkitTransitionEnd oTransitionEnd mozTransitionEnd msTransitionEnd', function () {\n                $('.input__scroll-container').removeClass(\"scroll-container--anim\");\n            }\n        );\n\n        checkPos(true, deltaToStop);\n\n    }\n\n\n    // ------------------- 3d.js -------------------\n\n    $scope.d3Transform = function(){\n        console.log(\"transform this shit\");\n\n        d3.selectAll(\".input__number\").transition()\n            .duration(750)\n            .style('color', 'red');\n    }\n\n    function checkPos(last, endPosition){\n        // set last to default value false\n        last = typeof last !== 'undefined' ? last : false;\n\n        // center of wrap to determine, which span should transform\n        // center + position of wrap from top\n        var middle = $('.input__wrap').height() / 2 + $('.input__wrap')[0].getBoundingClientRect().top;\n        var elemHeight = $('.input__inactive').first().height();\n        var selectionRange = {\n            min: middle - elemHeight/2,\n            max: middle + elemHeight/2\n        }\n        var transitionRange = {\n            min: selectionRange.min - elemHeight,\n            max: selectionRange.max + elemHeight/2\n        }\n\n\n        d3.selectAll(\".input__number\").each( function(d) {\n            var scaleValue, opacityValue;\n            var position = $(this)[0].getBoundingClientRect().top\n\n            if (last) {\n                // modify position if pan stopped and set wanted end pos\n                position = position + endPosition;\n            }\n\n            var range = position + $(this).height();\n            $(this).attr('data-pos', position);\n\n            if( selectionRange.min < position && position < middle){\n                scaleValue = \"scale(1) translateZ(0)\";\n                opacityValue = 1;\n                logValue = \"CASE: 0 – MIDDLE\";\n            } else if ( transitionRange.min <= position && position <= selectionRange.min ) {\n                // return a mapped value\n                var mappedScale = mapRange( position, transitionRange.min, selectionRange.min, 0.5, 1 );\n                opacityValue = mapRange( position, transitionRange.min, selectionRange.min, 0.2, 1 );\n                scaleValue = (\"scale(\" + mappedScale + \") translateZ(0)\" );\n                logValue = \"CASE: 1 – TRANS LOW\";\n            } else if ( middle <= position && position <= transitionRange.max ) {\n                // return a mapped value\n                var mappedScale = mapRange( position, middle, transitionRange.max, 1, 0.5 );\n                opacityValue = mapRange( position, middle, transitionRange.max, 1, 0.2 );\n                scaleValue = (\"scale(\" + mappedScale + \") translateZ(0)\" );\n                logValue = \"CASE: 2 – TRANS HIGH\";\n            } else {\n                scaleValue = \"scale(0.5) translateZ(0)\";\n                opacityValue = 0.2;\n                logValue = \"CASE: 3 – ELSE\";\n            }\n\n            // if is last check after panMove -> set css transitions\n            if(last==true){\n                // add class which sets transitions in css\n                d3.select(this).classed('span--panend', true);\n            }\n\n            d3.select(this).style('-webkit-transform', scaleValue);\n            d3.select(this).style('opacity', opacityValue);\n\n        });\n    }\n\n    //mapping function\n    function mapRange(value, low1, high1, low2, high2) {\n        return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n    }\n\n    //round function\n    function roundTo(num, round){\n        return Math.round(num/round) * round;\n    }\n\n\n    // $scope.timerRunning = true;\n    // $scope.startTimer = function (){\n    //     $scope.$broadcast('timer-start');\n    //     $scope.timerRunning = true;\n    // };\n    // $scope.stopTimer = function (){\n    //     $scope.$broadcast('timer-stop');\n    //     $scope.timerRunning = false;\n    // };\n\n    // angular timer\n\n    // liste to end of timer\n    $scope.$on('timer-stopped', function (event, args) {\n        console.log('timer-stopped args = ', args);\n    });\n\n\n\n\n}]);","app.controller('exerciseController', ['$scope', '$rootScope', '$route', '$location', 'dataService', function($scope, $rootScope, $route, $location, dataService) {\n    console.log(dataService);\n    $scope.infoDeltaY = 0;\n    $scope.exercises = dataService.getExercises();\n    console.log(\"$scope.exercises: \" + $scope.exercises);\n    $scope.totalExercises = $scope.exercises.length;\n\n\n\n    $scope.prev = function () {\n        console.log(\"prev\");\n        var prevEx = parseInt($route.current.params.id, 10) -1;\n        if(prevEx > 0){\n            // class to check if anim from left or right\n            $('body').addClass('anim-from-left');\n            $('body').removeClass('anim-from-right');\n            $location.path('/exercise/' + prevEx);\n        }\n    }\n\n    $scope.next = function () {\n        var nextEx = parseInt($route.current.params.id, 10) +1;\n        if(nextEx <= $scope.totalExercises){\n            // class to check if anim from left or right\n            $('body').addClass('anim-from-right');\n            $('body').removeClass('anim-from-left');\n            $location.path('/exercise/' + nextEx);\n        }\n    }\n\n    $scope.currentExercise = function () {\n        return $scope.exercises[$route.current.params.id -1];\n    }\n\n    $scope.panInfoUp = function (event) {\n        // console.log(event.deltaY);\n        // set transition to 0 to have instantaneous reaction\n        $scope.infoTransition = 0; // in seconds\n        $rootScope.$emit('overview:setTransitionSpeed', { speed: 0});\n        if(event.deltaY < -40){\n            console.log(\"event.deltaY: \" + event.deltaY);\n            $scope.infoDeltaY = event.deltaY;\n        } else if(event.deltaY > 50){\n            // send hint to pan down\n            $rootScope.$emit('overview:panDown', { y: event.deltaY });\n            // and pan down info with color\n            $scope.infoDeltaY = event.deltaY;\n        }\n    }\n\n\n\n    $scope.overviewShowEmit = function() {\n        $rootScope.$emit('overview:show');\n    }\n\n    $scope.stopPanInfo = function (event) {\n        $rootScope.$emit('overview:setTransitionSpeed', { speed: 0});\n        // if over threshold -> move up totally\n        if($scope.infoDeltaY < -100 ){\n            $scope.infoTransition = 0.2; // in seconds\n            // +50 for padding and margin\n            $scope.infoDeltaY = - ($('.exercise__info').height() + 50);\n            // = exercise done\n            // and change view\n            var nextEx = parseInt($route.current.params.id, 10) +1;\n            $('body').addClass('anim-from-right');\n            $('body').removeClass('anim-from-left');\n\n            // check for transition ending\n            $('.exercise__info').on('transitionend webkitTransitionEnd oTransitionEnd mozTransitionEnd msTransitionEnd', function () {\n                    console.log(\"transition ended\");\n                    // after transition has finished go to next exercise\n                    $scope.$apply(function(){\n                        $location.path('/exercise/' + nextEx);\n                    });\n                }\n            );\n\n        } else if( event.deltaY > 0) {\n            console.log(\"pan down\", event.deltaY);\n            if ( event.deltaY > $(window).height() * 0.2 ) {\n                // init overv scroll down fct in overview controller\n                $rootScope.$emit('overview:show');\n                // and scroll down info area\n                $scope.infoTransition = 1; // in seconds\n                $scope.infoDeltaY = $(window).height();\n\n                // check for transition ending\n                $('.exercise__info').on('transitionend webkitTransitionEnd oTransitionEnd mozTransitionEnd msTransitionEnd', function () {\n                        console.log(\"overview at bottom\");\n                        $scope.$apply(function(){\n                            $scope.infoDeltaY = 0;\n                        });\n                    }\n                );\n            } else {\n                // and scroll down info area\n                $scope.infoTransition = 1; // in seconds\n                $scope.infoDeltaY = 0;\n                $rootScope.$emit('overview:hide');\n            }\n\n        } else {\n            // change transition speed\n            $scope.infoTransition = 1; // in seconds\n            $scope.infoDeltaY = 0;\n        }\n\n    }\n\n    $scope.setBgColor = function (type) {\n        switch (type) {\n            case \"repetition\":\n            return 'clr-blue'; // return class name\n            break;\n\n            case \"weight\":\n            return 'clr-red'; // return class name\n            break;\n\n            case \"time\":\n            return 'clr-orange'; // return class name\n            break;\n\n            default:\n            return 'clr-orange'; // return class name\n        }\n    }\n\n}]);","app.controller('mainController', ['$scope', '$rootScope', '$route', '$location', function($scope, $rootScope, $route, $location) {\n\n    // $rootScope.$on('overview:show', function(event, data) {\n    //     // handle showOverview()\n    //     console.log(\"emit received\");\n\n    // })\n\n    $scope.goToURL = function(targetURL, direction) {\n        console.log(\"function goToURL\");\n        if(direction == 'fromLeft'){\n            $('body').addClass('anim-from-left');\n            $('body').removeClass('anim-from-right');\n        } else {\n            $('body').addClass('anim-from-right');\n            $('body').removeClass('anim-from-left');\n        }\n\n        $location.path(targetURL);\n    }\n\n\n\n}]);","app.controller('overviewController', ['$scope', '$rootScope', '$route', '$location', 'dataService', function($scope, $rootScope, $route, $location, dataService) {\n\n    $scope.panDeltaY = -$(window).height();\n    $scope.transitionSpeed = 0; // define duration in seconds\n\n    $scope.exercises = dataService.getExercises();\n\n    // undo overview display none\n    $scope.overviewDisplayState = \"inline\";\n\n    // listen to events\n    $rootScope.$on('overview:show', function(event, data) {\n        // handle showOverview()\n        $scope.overviewShow();\n    })\n\n    $rootScope.$on('overview:setTransitionSpeed', function(event, data) {\n        // handle showOverview()\n        // console.log(\"setTransitionSpeed: \" + data.speed);\n        $scope.transitionSpeed = data.speed;\n    })\n\n    // listen to events\n    $rootScope.$on('overview:hide', function(event, data) {\n        // handle showOverview()\n        $scope.transitionSpeed = 1; // in sec\n        $scope.panDeltaY = -$(window).height();\n    })\n\n    $rootScope.$on('overview:panDown', function(event, data) {\n        // handle showOverview()\n        $scope.panDeltaY = -$(window).height() + data.y;\n    })\n\n    $scope.setBgColor = function (type) {\n        switch (type) {\n            case \"repetition\":\n            return 'clr-blue'; // return class name\n            break;\n\n            case \"weight\":\n            return 'clr-red'; // return class name\n            break;\n\n            case \"time\":\n            return 'clr-orange'; // return class name\n            break;\n\n            default:\n            return 'clr-orange'; // return class name\n        }\n    }\n\n    $scope.goToURL = function(targetURL, direction) {\n        if(direction == 'fromLeft'){\n            $('body').addClass('anim-from-left');\n            $('body').removeClass('anim-from-right');\n        } else {\n            $('body').addClass('anim-from-right');\n            $('body').removeClass('anim-from-left');\n        }\n\n        $location.path(targetURL);\n    }\n\n    $scope.panOverviewUp = function (event) {\n        if(event.deltaY < 0){\n            $scope.transitionSpeed = 0; // in sec\n            $scope.panDeltaY = event.deltaY;\n            console.log(\"$scope.panDeltaY: \" + $scope.panDeltaY);\n        }\n    }\n\n    $scope.stopPanOverview = function (event) {\n        // if threshold is more than:\n        if (event.deltaY < (-$(window).height() * 0.15)) {\n            $scope.transitionSpeed = 1; // in sec\n            $scope.panDeltaY = - $(window).height();\n        } else {\n            $scope.transitionSpeed = 1; // in sec\n            $scope.panDeltaY = 0; //\n        }\n\n    }\n\n    $scope.swipeUp = function () {\n        console.log(\"swipe up\");\n        $scope.transitionSpeed = 1;\n        $scope.panDeltaY = - $(window).height();\n    }\n\n    $scope.overviewShow = function () {\n        // show overview from top to bottom\n        $scope.transitionSpeed = 1;\n        $scope.panDeltaY = 0;\n    }\n\n}]);","app.directive('paExercise', function() {\n  return {\n    scope: {\n      info: '='\n    },\n    templateUrl: 'js/directives/pa-exercise.html'\n  };\n});","app.directive('paOverview', function() {\n  return {\n    scope: {\n      info: '='\n    },\n    templateUrl: 'js/directives/pa-overview.html'\n  };\n});","app.directive('pickWheeld3', function() {\n    // all d3 stuff\n\n});","app.factory('dataService', function() {\n    var exercises = [\n        {\n            id: 1,\n            title: \"Push Ups\",\n            type: \"repetition\",\n            imgSrc: \"pushups.svg\"\n        },\n        {\n            id: 2,\n            title: \"Pull Ups\",\n            type: \"repetition\",\n            imgSrc: \"frontlift.svg\"\n        },\n        {\n            id: 3,\n            title: \"Shoulder Frontlift\",\n            type: \"weight\",\n            imgSrc: \"frontlift.svg\"\n        },\n        {\n            id: 4,\n            title: \"Side Hip Raises\",\n            type: \"repetition\",\n            imgSrc: \"sidehipraises.svg\"\n        },\n        {\n            id: 5,\n            title: \"Plank\",\n            type: \"time\",\n            imgSrc: \"plank.svg\"\n        }\n    ];\n\n    var service = {\n        getExercises: function() {\n            return exercises;\n        }\n    };\n    return service;\n});\n"],"sourceRoot":"/source/"}